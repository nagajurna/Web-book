"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),WebBook=function(){function t(e,i){var n=this;_classCallCheck(this,t),this._bookContainer=e,this._textContainer=e.querySelector("[data-wb-text-container]"),this._text=e.querySelector("[data-wb-text]"),this._height=i.height,this._width=i.maxWidth,this._marginX=void 0===i.marginX?35:i.marginX,this._marginY=void 0===i.marginY?20:i.marginY,this._position=0,this.col=!0,this._bookmark=null,this._containerWidth=null,this._lastBreak=document.createElement("div"),this._lastBreak.className="wb-text-break",this._text.appendChild(this._lastBreak),this._lastElement=document.createElement("div"),this._lastElement.innerHTML="&nbsp;",this._lastElement.className="wb-section wb-no-toc",this._text.appendChild(this._lastElement),this._sections=this._text.querySelectorAll(".wb-section"),this._breaks=this._text.querySelectorAll(".wb-text-break"),this._elements=this._text.querySelectorAll(":not(.wb-text-break)"),this._toc=this._bookContainer.querySelector("[data-wb-toc]"),this.setToc(),this._currentPages=this._bookContainer.querySelectorAll(".wb-current-page"),this._totalPages=this._bookContainer.querySelectorAll(".wb-total-pages"),this._currentTotalPages=this._bookContainer.querySelectorAll(".wb-currentByTotal-pages"),this._elPageNumbers=this._bookContainer.querySelectorAll(".wb-element-page-number"),this._sectionTitles=this._bookContainer.querySelectorAll(".wb-current-section-title"),this._bookContainer.querySelectorAll(".wb-link").forEach(function(t){t.addEventListener("click",function(t){if(!0===n.col){t.preventDefault();var e=t.target.getAttribute("href").replace(/^#/,"");n.goToPage(n.elementPageNumber(e))}},!1)}),("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&this.toBook()}return _createClass(t,[{key:"toBook",value:function(){if("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style){this.col=!0;var t=this._textContainer.style,e=this._text.style;t.boxSizing="border-box",t.overflow="hidden",t.position="relative",t.left=0,t.top=0,t.padding="0px",t.height=this.getHeight()+"px",t.maxWidth=this.getWidth()+"px",this._containerWidth=this._textContainer.clientWidth;for(var i=0;i<this._sections.length;i++)"10%"!==this._sections[i].style.minHeight&&(this._sections[i].style.minHeight="10%");for(var n=0;n<this._breaks.length;n++)"300%"!==this._breaks[n].style.marginBottom&&(this._breaks[n].style.marginBottom="300%");"300%"!==this._lastElement.style.marginBottom&&(this._lastElement.style.marginBottom="300%"),e.boxSizing="border-box",e.position="absolute",e.left=0,e.top=0,e.height="100%",e.width="100%",e.paddingRight=this.getMarginX()+"px",e.paddingLeft=this.getMarginX()+"px",e.paddingTop=this.getMarginY()+"px",e.paddingBottom=this.getMarginY()+"px",e.MozColumnFill="auto",e.WebkitColumnsWidth=this._containerWidth+"px",e.MozColumnWidth=this._containerWidth+"px",e.columnWidth=this._containerWidth+"px",e.MozColumnGap=2*this.getMarginX()+"px",e.WebkitColumnGap=2*this.getMarginX()+"px",e.columnGap=2*this.getMarginX()+"px",this._bookmark&&(this.goToBookmark(this._bookmark),this._position=this._text.offsetLeft),this.refresh()}}},{key:"toScroll",value:function(){this.col=!1;var t=this._container.style,e=this._text.style;t.height="auto",t.maxWidth=this.getWidth()+"px",t.overflow="visible",e.position="static",e.height="auto",t.paddingRight=this.getMarginX()+"px",t.paddingLeft=this.getMarginX()+"px",t.paddingTop=this.getMarginY()+"px",t.paddingBottom=this.getMarginY()+"px",("WebkitColumnWidth"in document.body.style||"MozColumnWidth"in document.body.style||"columnWidth"in document.body.style)&&(e.WebkitColumns="auto 1",e.MozColumns="auto 1",e.columns="auto 1");for(var i=0;i<this._sections.length;i++)this._sections[i].style.minHeight="0";for(var n=0;n<this._breaks.length;n++)this._breaks[n].style.marginBottom="0";this._lastElement.style.marginBottom="0px",this.refresh()}},{key:"setWidth",value:function(t){return this._width=t,this}},{key:"getWidth",value:function(){return this._width}},{key:"setHeight",value:function(t){return this._height=t,this}},{key:"getHeight",value:function(){return this._height}},{key:"setMarginX",value:function(t){return this._marginX=t,this}},{key:"getMarginX",value:function(){return this._marginX}},{key:"setMarginY",value:function(t){return this._marginY=t,this}},{key:"getMarginY",value:function(){return this._marginY}},{key:"forward",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._text.offsetLeft,this._position-=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"backward",value:function(){this._position<0&&(this._position=this._text.offsetLeft,this._position+=this._containerWidth,this._text.style.left=this._position+"px",this.refresh())}},{key:"tofirstPage",value:function(){this._position<0&&(this._position=0,this._text.style.left=this._position+"px",this.refresh())}},{key:"tolastPage",value:function(){this._lastElement.offsetLeft+this._position>this._containerWidth+this.getMarginX()&&(this._position=this._containerWidth+this.getMarginX()-this._lastElement.offsetLeft,this._text.style.left=this._position+"px",this.refresh())}},{key:"getPageNumber",value:function(){return Math.abs(Math.floor(this._position/this._containerWidth))+1}},{key:"getTotalPages",value:function(){return Math.floor(this._lastElement.offsetLeft/this._containerWidth)}},{key:"goToPage",value:function(t){t=(t=t<1?1:t)>this.getTotalPages()?this.getTotalPages():t;var e=this._containerWidth*(t-1);this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"elementPageNumber",value:function(t){var e=this._text.querySelector("#"+t).offsetLeft-this.getMarginX();return(e=e%this._containerWidth!=0?e-e%this._containerWidth:e)/this._containerWidth+1}},{key:"getSectionTitle",value:function(){for(var t=-this._position,e=void 0,i=1;i<this._sections.length;i++)if(this._sections[i].offsetLeft-this._containerWidth>=t){var n=this._sections[i-1].id;e=void 0!==n&&this.getPageNumber()===this.elementPageNumber(n)?"":this._sections[i-1].getAttribute("data-wb-title");break}return e}},{key:"setToc",value:function(){var t=this;if(this._toc){if(this._toc.getAttribute("data-wb-toc")){var e=document.createElement("p");e.setAttribute("class","data-wb-toc-title"),e.innerHTML=toc.getAttribute("data-wb-toc"),this._toc.appendChild(e)}this._sections.forEach(function(e){if(!e.className.match(/wb-no-toc/)){var i=document.createElement("p");i.innerHTML=e.getAttribute("data-wb-title"),i.setAttribute("class","wb-toc-item");var n=document.createElement("a");n.setAttribute("href","#"+e.id),n.setAttribute("class","wb-element-page-number wb-link"),i.appendChild(n),t._toc.appendChild(i)}})}}},{key:"getTocCurrentSection",value:function(){for(var t=this,e=-this._position,i=1;i<this._sections.length&&!(this._sections[i].offsetLeft-this._containerWidth>=e&&"break"===function(){var e=t._sections[i-1].id;return t._toc.querySelectorAll("a").forEach(function(t){t.getAttribute("href").replace(/^#/,"")===e?t.parentElement.className.match(/current/)||(t.parentElement.className+=" current"):t.parentElement.className.match(/current/)&&(t.parentElement.className=t.parentElement.className.replace(/ current/,""))}),"break"}());i++);}},{key:"insertBookmark",value:function(){for(var t=null,e=0;e<this._elements.length;e++){var i=this._elements[e].offsetLeft-this.getMarginX();if((i=i%this._containerWidth!=0?i-i%this._containerWidth:i)===-this._position){t=e;break}if(i>-this._position){t=e-1;break}}this._bookmark=t}},{key:"goToBookmark",value:function(t){var e=this._elements[this._bookmark].offsetLeft-this.getMarginX();e=e%this._containerWidth!=0?e-e%this._containerWidth:e,this._text.style.left=-e+"px",this._position=this._text.offsetLeft,this.refresh()}},{key:"refresh",value:function(){var t=this;this.insertBookmark(),!1===this.col?(this._currentPages.forEach(function(t){t.innerHTML=""}),this._totalPages.forEach(function(t){t.innerHTML=""}),this._currentTotalPages.forEach(function(t){t.innerHTML=""}),this._elPageNumbers.forEach(function(t){t.innerHTML=""}),this._sectionTitles.forEach(function(t){t.innerHTML=""})):(this._toc&&this.getTocCurrentSection(),this._currentPages.forEach(function(e){e.innerHTML!=t.getPageNumber()&&(e.innerHTML=t.getPageNumber())}),this._totalPages.forEach(function(e){e.innerHTML!=t.getTotalPages()&&(e.innerHTML=t.getTotalPages())}),this._currentTotalPages.forEach(function(e){e.innerHTML!==t.getPageNumber()+"/"+t.getTotalPages()&&(e.innerHTML=t.getPageNumber()+"/"+t.getTotalPages())}),this._elPageNumbers.forEach(function(e){var i=e.getAttribute("href").replace(/^#/,""),n=t.elementPageNumber(i);e.innerHTML!=n&&(e.innerHTML=n)}),this._sectionTitles.forEach(function(e){e.innerHTML!==t.getSectionTitle()&&(e.innerHTML=t.getSectionTitle())}))}}]),t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYi1ib29rLmpzIl0sIm5hbWVzIjpbIldlYkJvb2siLCJib29rQ29udGFpbmVyIiwib3B0aW9ucyIsIl90aGlzIiwidGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsIl9ib29rQ29udGFpbmVyIiwiX3RleHRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiX3RleHQiLCJfaGVpZ2h0IiwiX3dpZHRoIiwibWF4V2lkdGgiLCJfbWFyZ2luWCIsInVuZGVmaW5lZCIsIm1hcmdpblgiLCJfbWFyZ2luWSIsIm1hcmdpblkiLCJfcG9zaXRpb24iLCJoZWlnaHQiLCJfbGFzdEVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb2wiLCJjbGFzc05hbWUiLCJfYm9va21hcmsiLCJfc2VjdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2xhc3RCcmVhayIsIl9lbGVtZW50cyIsIl90b3RhbFBhZ2VzIiwiX2JyZWFrcyIsIl9lbFBhZ2VOdW1iZXJzIiwic2V0VG9jIiwidmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJfY3VycmVudFBhZ2VzIiwiX2N1cnJlbnRUb3RhbFBhZ2VzIiwiZ2V0QXR0cmlidXRlIiwiX3NlY3Rpb25UaXRsZXMiLCJlbGVtZW50UGFnZU51bWJlciIsImJvZHkiLCJzdHlsZSIsInByZXZlbnREZWZhdWx0IiwiY3MiLCJ0cyIsInRvQm9vayIsImJveFNpemluZyIsIm92ZXJmbG93IiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwicGFkZGluZyIsImdldEhlaWdodCIsImNsaWVudFdpZHRoIiwiaSIsImxlbmd0aCIsIm1pbkhlaWdodCIsIl9jb250YWluZXJXaWR0aCIsIm1hcmdpbkJvdHRvbSIsIndpZHRoIiwicGFkZGluZ1JpZ2h0IiwicGFkZGluZ0xlZnQiLCJnZXRNYXJnaW5YIiwicGFkZGluZ1RvcCIsImdldE1hcmdpblkiLCJwYWRkaW5nQm90dG9tIiwiTW96Q29sdW1uRmlsbCIsIldlYmtpdENvbHVtbnNXaWR0aCIsIm9mZnNldExlZnQiLCJXZWJraXRDb2x1bW5HYXAiLCJfY29udGFpbmVyIiwiZ2V0V2lkdGgiLCJjb2x1bW5zIiwiV2Via2l0Q29sdW1ucyIsInJlZnJlc2giLCJ3IiwiaCIsIm0iLCJNYXRoIiwiYWJzIiwiZmxvb3IiLCJudW1iZXIiLCJnZXRUb3RhbFBhZ2VzIiwiaWQiLCJlbFBvc2l0aW9uIiwidGl0bGUiLCJ0b3RhbFBhZ2VzIiwiZ2V0UGFnZU51bWJlciIsIl90aGlzMiIsIl90b2MiLCJlbCIsInRvY1RpdGxlIiwiZWxQYWdlTnVtYmVyIiwiZm9yRWFjaCIsIm1hdGNoIiwicCIsInNldEF0dHJpYnV0ZSIsImEiLCJhcHBlbmRDaGlsZCIsIl90aGlzMyIsInJlcGxhY2UiLCJwYXJlbnRFbGVtZW50IiwiYm9va21hcmsiLCJfdGhpczQiLCJpbnNlcnRCb29rbWFyayIsImdldFRvY0N1cnJlbnRTZWN0aW9uIiwiZWxlbWVudCIsInBhZ2VOdW1iZXIiLCJnZXRTZWN0aW9uVGl0bGUiXSwibWFwcGluZ3MiOiI2WEFBTUEsbUJBQ0wsU0FBQUEsRUFBWUMsRUFBZUMsR0FBUyxJQUFBQyxFQUFBQyxLQUFBQyxnQkFBQUQsS0FBQUosR0FFbkNJLEtBQUtFLGVBQWlCTCxFQUN0QkcsS0FBS0csZUFBaUJOLEVBQWNPLGNBQWMsNEJBQ2xESixLQUFLSyxNQUFRUixFQUFjTyxjQUFjLGtCQUoxQ0osS0FBQU0sUUFBQVIsRUFBWUQsT0FBd0JHLEtBQUFPLE9BQUFULEVBQUFVLFNBUW5DUixLQUFLUyxjQUE2QkMsSUFBbEJaLEVBQVFhLFFBQXNCLEdBQUtiLEVBQVFhLFFBUnhCWCxLQUFBWSxjQUFBRixJQUFBWixFQUFBZSxRQUFBLEdBQUFmLEVBQUFlLFFBQ25DYixLQUFBYyxVQUFBLEVBQ0FkLEtBQUtFLEtBQUFBLEVBQ0xGLEtBQUtHLFVBQUFBLEtBQ0xILEtBQUtLLGdCQUFRUixLQUViRyxLQUFLTSxXQUFVUixTQUFRaUIsY0FBdkIsT0FDQWYsS0FBS08sV0FBU1QsVUFBUVUsZ0JBQ3RCUixL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UUFBUXRDLFNBQUFBLEdBQ3ZCcEIsRUFBQUEsV0FBWUEsRUFBU3VDLGtCQUNyQnZELEVBQUFaLFVBQUFtRixFQUFBaEIsbUJBSUF0RixLQUFBMkIsWUFBQWlFLFFBQUEsU0FBQTdELEdBd0NLQSxFQUFJWixXQUFXbUYsRUFBS3JCLGtCQUN0QmxELEVBQUlaLFVBQVltRixFQUFLckIsbUJBdEN4QmpGLEtBQUt1RyxtQkFBTFgsUUFBQSxTQUFBN0QsR0EyQ0tBLEVBQUlaLFlBQWFtRixFQUFLaEIsZ0JBQWtCLElBQU1nQixFQUFLckIsa0JBekN4RGxELEVBQUdaLFVBQVdtRixFQUFkaEIsZ0JBQXFCLElBQUFnQixFQUFBckIsbUJBSW5CakYsS0FGRDZCLGVBQUErRCxRQUFBLFNBQUE3RCxHQTZDQyxJQUFJbUQsRUFBS25ELEVBQUlLLGFBQWEsUUFBUStELFFBQVEsS0FBSyxJQXpDaERPLEVBQWlCZCxFQUFBQSxrQkFBZ0JWLEdBQ2hDbkQsRUFBSVosV0FBWXVGLElBRGpCM0UsRUFBQVosVUFBQXVGLEtBTUMxRyxLQUZEcUMsZUFBQXVELFFBQUEsU0FBQTdELEdBNkNJQSxFQUFJWixZQUFZbUYsRUFBS0ssb0JBekN6QjVFLEVBQUtGLFVBQUFBLEVBQWUrRCIsImZpbGUiOiJ3ZWItYm9vay5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFdlYkJvb2sge1xuXHRjb25zdHJ1Y3Rvcihib29rQ29udGFpbmVyLCBvcHRpb25zKSB7XG5cdFx0Ly9jb250YWluZXJzXG5cdFx0dGhpcy5fYm9va0NvbnRhaW5lciA9IGJvb2tDb250YWluZXI7XG5cdFx0dGhpcy5fdGV4dENvbnRhaW5lciA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dC1jb250YWluZXJdJyk7XG5cdFx0dGhpcy5fdGV4dCA9IGJvb2tDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtd2ItdGV4dF0nKTtcblx0XHQvL29wdGlvbnNcblx0XHR0aGlzLl9oZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcblx0XHR0aGlzLl93aWR0aCA9IG9wdGlvbnMubWF4V2lkdGg7XG5cdFx0dGhpcy5fbWFyZ2luWCA9IG9wdGlvbnMubWFyZ2luWD09PXVuZGVmaW5lZCA/IDM1IDogb3B0aW9ucy5tYXJnaW5YO1xuXHRcdHRoaXMuX21hcmdpblkgPSBvcHRpb25zLm1hcmdpblk9PT11bmRlZmluZWQgPyAyMCA6IG9wdGlvbnMubWFyZ2luWTtcblx0XHQvL2luaXQgcG9zaXRpb24sIGNvbCAsY29udGFpbmVyV2lkdGggYW5kIGJvb2ttYXJrXG5cdFx0dGhpcy5fcG9zaXRpb24gPSAwO1xuXHRcdHRoaXMuY29sID0gdHJ1ZTsvL2RlZmF1bHQgdHJ1ZSA9IHRvQm9vaygpXG5cdFx0dGhpcy5fYm9va21hcmsgPSBudWxsO1xuXHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gbnVsbDtcblx0XHQvL3RoaXMubGFzdEJyZWFrIGlzIHVzZWQgYXMgYSBnaG9zdCBwYWdlXG5cdFx0dGhpcy5fbGFzdEJyZWFrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0QnJlYWsuY2xhc3NOYW1lID0gXCJ3Yi10ZXh0LWJyZWFrXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0QnJlYWspO1xuXHRcdC8vdGhpcy5fbGFzdEVsZW1lbnQgaXMgdXNlZCBhcyBsYW5kbWFya1xuXHRcdHRoaXMuX2xhc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5pbm5lckhUTUwgPSBcIiZuYnNwO1wiOy8vbm90IGVtcHR5IChmb3IgbW96Q29sdW1ucylcblx0XHR0aGlzLl9sYXN0RWxlbWVudC5jbGFzc05hbWUgPSBcIndiLXNlY3Rpb24gd2Itbm8tdG9jXCI7XG5cdFx0dGhpcy5fdGV4dC5hcHBlbmRDaGlsZCh0aGlzLl9sYXN0RWxlbWVudCk7XG5cdFx0Ly9zZWN0aW9uc1xuXHRcdHRoaXMuX3NlY3Rpb25zID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCcud2Itc2VjdGlvbicpO1xuXHRcdC8vYnJlYWtzXG5cdFx0dGhpcy5fYnJlYWtzID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yQWxsKCcud2ItdGV4dC1icmVhaycpO1xuXHRcdC8vZWxlbWVudHMgOiBzZWxlY3QgYWxsIGVsZW1lbnRzIGJ1dCAudGV4dC1icmVha3MgKGZvciBib29rbWFya3MpXG5cdFx0dGhpcy5fZWxlbWVudHMgPSB0aGlzLl90ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoJzpub3QoLndiLXRleHQtYnJlYWspJyk7XG5cdFx0Ly90b2Ncblx0XHR0aGlzLl90b2MgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdiLXRvY10nKTtcblx0XHQvL3NldFRvYyBiZWZvcmUgcXVlcnlpbmcgdGhpcy5lbFBhZ2VOdW1iZXJzXG5cdFx0dGhpcy5zZXRUb2MoKTtcblx0XHQvL2luZm9zIGNvbnRhaW5lcnNcblx0XHR0aGlzLl9jdXJyZW50UGFnZXMgPSB0aGlzLl9ib29rQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy53Yi1jdXJyZW50LXBhZ2UnKTtcblx0XHR0aGlzLl90b3RhbFBhZ2VzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItdG90YWwtcGFnZXMnKTtcblx0XHR0aGlzLl9jdXJyZW50VG90YWxQYWdlcyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWN1cnJlbnRCeVRvdGFsLXBhZ2VzJyk7XG5cdFx0dGhpcy5fZWxQYWdlTnVtYmVycyA9IHRoaXMuX2Jvb2tDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLndiLWVsZW1lbnQtcGFnZS1udW1iZXInKTtcblx0XHR0aGlzLl9zZWN0aW9uVGl0bGVzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItY3VycmVudC1zZWN0aW9uLXRpdGxlJyk7XG5cdFx0XG5cdFx0Ly9saW5rcyA6IHJlcGxhY2UgZGVmYXVsdCB3aXRoIGdvVG9QYWdlXG5cdFx0bGV0IGxpbmtzID0gdGhpcy5fYm9va0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcud2ItbGluaycpO1xuXHRcdGxpbmtzLmZvckVhY2goIHZhbCA9PiB7XG5cdFx0XHR2YWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblx0XHRcdFx0aWYodGhpcy5jb2w9PT10cnVlKSB7XG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdGxldCBocmVmID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdFx0XHRcdFx0bGV0IGlkID0gaHJlZi5yZXBsYWNlKC9eIy8sXCJcIik7XG5cdFx0XHRcdFx0dGhpcy5nb1RvUGFnZSh0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIGZhbHNlKTtcblx0XHR9KVxuXHRcdFxuXHRcdFxuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyBpbiBkb2N1bWVudC5ib2R5LnN0eWxlKSB7XG5cdFx0XHR0aGlzLnRvQm9vaygpO1xuXHRcdH1cblxuXHR9XG5cblx0dG9Cb29rKCkge1xuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyAgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dGhpcy5jb2wgPSB0cnVlO1xuXHRcdFx0bGV0IGNzID0gdGhpcy5fdGV4dENvbnRhaW5lci5zdHlsZTtcblx0XHRcdGxldCB0cyA9IHRoaXMuX3RleHQuc3R5bGU7XG5cdFx0XHQvL3RleHQtY29udGFpbmVyXG5cdFx0XHRjcy5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdGNzLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRcdGNzLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdFx0Y3MubGVmdCA9IDA7XG5cdFx0XHRjcy50b3AgPSAwO1xuXHRcdFx0Y3MucGFkZGluZyA9IFwiMHB4XCI7XG5cdFx0XHRjcy5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xuXHRcdFx0Y3MubWF4V2lkdGggPSB0aGlzLmdldFdpZHRoKCkgKyBcInB4XCI7Ly9tYXhXaWR0aCA6IHJlc3BvbnNpdmVcblx0XHRcdHRoaXMuX2NvbnRhaW5lcldpZHRoID0gdGhpcy5fdGV4dENvbnRhaW5lci5jbGllbnRXaWR0aDsvL3Jlc3BvbnNpdmVcblx0XHRcdFxuXHRcdFx0Ly9zZWN0aW9uc1xuXHRcdFx0Ly9oYWNrIGZpcmVmb3ggKHBvdXIgb2Zmc2V0TGVmdCkgOiBtaW5IZWlnaHQgPSAxMCVcblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLnN0eWxlLm1pbkhlaWdodCE9PVwiMTAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjEwJVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvL21hbnVhbCBicmVha3Ncblx0XHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX2JyZWFrcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tIT09XCIzMDAlXCIpIHtcblx0XHRcdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIzMDAlXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0XHRpZih0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20hPT1cIjMwMCVcIikge1xuXHRcdFx0XHR0aGlzLl9sYXN0RWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBcIjMwMCVcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly90ZXh0XG5cdFx0XHR0cy5ib3hTaXppbmcgPSBcImJvcmRlci1ib3hcIjtcblx0XHRcdHRzLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdFx0dHMubGVmdCA9IDA7XG5cdFx0XHR0cy50b3AgPSAwO1xuXHRcdFx0dHMuaGVpZ2h0ID0gXCIxMDAlXCI7XG5cdFx0XHR0cy53aWR0aCA9IFwiMTAwJVwiO1xuXHRcdFx0dHMucGFkZGluZ1JpZ2h0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0XHR0cy5wYWRkaW5nTGVmdCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ1RvcCA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdFx0dHMucGFkZGluZ0JvdHRvbSA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdFx0dHMuTW96Q29sdW1uRmlsbCA9IFwiYXV0b1wiOy8vaW1wb3J0YW50ICEhIVxuXHRcdFx0dHMuV2Via2l0Q29sdW1uc1dpZHRoID0gdGhpcy5fY29udGFpbmVyV2lkdGggKyBcInB4XCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5XaWR0aCA9IHRoaXMuX2NvbnRhaW5lcldpZHRoICsgXCJweFwiO1xuXHRcdFx0dHMuY29sdW1uV2lkdGggPSB0aGlzLl9jb250YWluZXJXaWR0aCArIFwicHhcIjtcblx0XHRcdHRzLk1vekNvbHVtbkdhcCA9IHRoaXMuZ2V0TWFyZ2luWCgpKjIgKyBcInB4XCI7XG5cdFx0XHR0cy5XZWJraXRDb2x1bW5HYXAgPSB0aGlzLmdldE1hcmdpblgoKSoyICsgXCJweFwiO1xuXHRcdFx0dHMuY29sdW1uR2FwID0gdGhpcy5nZXRNYXJnaW5YKCkqMiArIFwicHhcIjtcblx0XHRcdFxuXHRcdFx0Ly9HbyB0byBib29rbWFya1xuXHRcdFx0aWYodGhpcy5fYm9va21hcmspIHtcblx0XHRcdFx0dGhpcy5nb1RvQm9va21hcmsodGhpcy5fYm9va21hcmspO1xuXHRcdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly9SZWZyZXNoIGluZm8gY29udGFpbmVyc1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0XHRcblx0XHR9XG5cdH1cblxuXHR0b1Njcm9sbCgpIHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0dGhpcy5jb2wgPSBmYWxzZTtcblx0XHRsZXQgY3MgPSB0aGlzLl9jb250YWluZXIuc3R5bGU7XG5cdFx0bGV0IHRzID0gdGhpcy5fdGV4dC5zdHlsZTtcblx0XHQvL2NvbnRhaW5lclxuXHRcdGNzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLm1heFdpZHRoID0gdGhpcy5nZXRXaWR0aCgpICsgXCJweFwiO1xuXHRcdGNzLm92ZXJmbG93ID0gXCJ2aXNpYmxlXCI7XG5cdFx0Ly90ZXh0XG5cdFx0dHMucG9zaXRpb24gPSBcInN0YXRpY1wiO1xuXHRcdHRzLmhlaWdodCA9IFwiYXV0b1wiO1xuXHRcdGNzLnBhZGRpbmdSaWdodCA9IHRoaXMuZ2V0TWFyZ2luWCgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdMZWZ0ID0gdGhpcy5nZXRNYXJnaW5YKCkgKyBcInB4XCI7XG5cdFx0Y3MucGFkZGluZ1RvcCA9IHRoaXMuZ2V0TWFyZ2luWSgpICsgXCJweFwiO1xuXHRcdGNzLnBhZGRpbmdCb3R0b20gPSB0aGlzLmdldE1hcmdpblkoKSArIFwicHhcIjtcblxuXHRcdGlmKCdXZWJraXRDb2x1bW5XaWR0aCcgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSB8fCAnTW96Q29sdW1uV2lkdGgnIGluIGRvY3VtZW50LmJvZHkuc3R5bGUgfHwgJ2NvbHVtbldpZHRoJyAgaW4gZG9jdW1lbnQuYm9keS5zdHlsZSkge1xuXHRcdFx0dHMuV2Via2l0Q29sdW1ucyA9IFwiYXV0byAxXCI7XG5cdFx0XHR0cy5Nb3pDb2x1bW5zID0gXCJhdXRvIDFcIjtcblx0XHRcdHRzLmNvbHVtbnMgPSBcImF1dG8gMVwiO1xuXHRcdH1cblxuXHRcdC8vU2VjdGlvbnMgKGZvciBtb3pDb2x1bW5zKVxuXHRcdGZvcihsZXQgaT0wOyBpPHRoaXMuX3NlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9zZWN0aW9uc1tpXS5zdHlsZS5taW5IZWlnaHQgPSBcIjBcIjtcblx0XHR9XG5cdFx0Ly9tYW51YWwgYnJlYWtzXG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fYnJlYWtzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLl9icmVha3NbaV0uc3R5bGUubWFyZ2luQm90dG9tID0gXCIwXCI7XG5cdFx0fVxuXHRcdC8vbGFzdCBlbGVtZW50XG5cdFx0dGhpcy5fbGFzdEVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gXCIwcHhcIjtcblxuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9O1xuXG5cdHNldFdpZHRoKHcpIHtcblx0XHR0aGlzLl93aWR0aCA9IHc7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRXaWR0aCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XG5cdH1cblxuXHRzZXRIZWlnaHQoaCkge1xuXHRcdHRoaXMuX2hlaWdodCA9IGg7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRnZXRIZWlnaHQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuX2hlaWdodDtcblx0fVxuXG5cdHNldE1hcmdpblgobSkge1xuXHRcdHRoaXMuX21hcmdpblggPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWCgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWDtcblx0fVxuXG5cdHNldE1hcmdpblkobSkge1xuXHRcdHRoaXMuX21hcmdpblkgPSBtO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0Z2V0TWFyZ2luWSgpIHtcblx0XHRyZXR1cm4gdGhpcy5fbWFyZ2luWTtcblx0fVxuXG5cdGZvcndhcmQoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHQvL2xldCBjbG9uZSA9IHRoaXMuX3RleHQuY2xvbmVOb2RlKHRydWUpO1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiAtPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0XG5cdFx0XHQvL2NvbnNvbGUubG9nKGNsb25lKTtcblx0XHRcdC8vY2xvbmUuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHQvL3RoaXMuX2NvbnRhaW5lci5pbnNlcnRCZWZvcmUoY2xvbmUsdGhpcy50ZXh0KTtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdGJhY2t3YXJkKCkge1xuXHRcdGlmKHRoaXMuX3Bvc2l0aW9uIDwgMCkge1xuXHRcdFx0dGhpcy5fcG9zaXRpb24gPSB0aGlzLl90ZXh0Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiArPSB0aGlzLl9jb250YWluZXJXaWR0aDtcblx0XHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IHRoaXMuX3Bvc2l0aW9uICsgXCJweFwiO1xuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XG5cdFx0fVxuXHR9XG5cblx0dG9maXJzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fcG9zaXRpb24gPCAwKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IDA7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbiArIFwicHhcIjtcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xuXHRcdH1cblx0fVxuXG5cdHRvbGFzdFBhZ2UoKSB7XG5cdFx0aWYodGhpcy5fbGFzdEVsZW1lbnQub2Zmc2V0TGVmdCt0aGlzLl9wb3NpdGlvbiA+IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpKSB7XG5cdFx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2NvbnRhaW5lcldpZHRoK3RoaXMuZ2V0TWFyZ2luWCgpLXRoaXMuX2xhc3RFbGVtZW50Lm9mZnNldExlZnQ7XG5cdFx0XHR0aGlzLl90ZXh0LnN0eWxlLmxlZnQgPSB0aGlzLl9wb3NpdGlvbitcInB4XCI7XG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcblx0XHR9XG5cdH1cblxuXHRnZXRQYWdlTnVtYmVyKCkge1xuXHRcdGxldCBwYWdlTnVtYmVyID0gTWF0aC5hYnMoTWF0aC5mbG9vcih0aGlzLl9wb3NpdGlvbi90aGlzLl9jb250YWluZXJXaWR0aCkpKzE7XG5cdFx0cmV0dXJuIHBhZ2VOdW1iZXI7XG5cdH1cblxuXHRnZXRUb3RhbFBhZ2VzKCkge1xuXHRcdGxldCB0b3RhbFBhZ2VzID0gTWF0aC5mbG9vcih0aGlzLl9sYXN0RWxlbWVudC5vZmZzZXRMZWZ0L3RoaXMuX2NvbnRhaW5lcldpZHRoKTtcblx0XHRyZXR1cm4gdG90YWxQYWdlcztcblx0fVxuXG5cdGdvVG9QYWdlKG51bWJlcikge1xuXHRcdG51bWJlciA9IChudW1iZXI8MSA/IDEgOiBudW1iZXIpO1xuXHRcdG51bWJlcj0gKG51bWJlcj50aGlzLmdldFRvdGFsUGFnZXMoKSA/IHRoaXMuZ2V0VG90YWxQYWdlcygpIDogbnVtYmVyKTtcblx0XHRsZXQgcG9zaXRpb24gPSB0aGlzLl9jb250YWluZXJXaWR0aCoobnVtYmVyLTEpO1xuXHRcdHRoaXMuX3RleHQuc3R5bGUubGVmdCA9IC1wb3NpdGlvbiArIFwicHhcIjtcblx0XHR0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX3RleHQub2Zmc2V0TGVmdDtcblx0XHR0aGlzLnJlZnJlc2goKTtcblx0fVxuXG5cdGVsZW1lbnRQYWdlTnVtYmVyKGlkKSB7XG5cdFx0bGV0IGVsID0gdGhpcy5fdGV4dC5xdWVyeVNlbGVjdG9yKCcjJyArIGlkKTtcblx0XHRsZXQgZWxQb3NpdGlvbiA9IGVsLm9mZnNldExlZnQgLSB0aGlzLmdldE1hcmdpblgoKTtcblx0XHRlbFBvc2l0aW9uID0gKGVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGghPT0wID8gZWxQb3NpdGlvbi1lbFBvc2l0aW9uJXRoaXMuX2NvbnRhaW5lcldpZHRoIDogZWxQb3NpdGlvbik7Ly9hbHdheXMgYXQgYSBwYWdlIGJlZ2lubmluZ1xuXHRcdGxldCBlbFBhZ2VOdW1iZXIgPSBlbFBvc2l0aW9uL3RoaXMuX2NvbnRhaW5lcldpZHRoICsgMTtcblx0XHRyZXR1cm4gZWxQYWdlTnVtYmVyO1xuXHR9XG5cblx0Z2V0U2VjdGlvblRpdGxlKCkge1xuXHRcdGxldCBwb3NpdGlvbiA9IC10aGlzLl9wb3NpdGlvbjtcblx0XHRsZXQgdGl0bGU7XG5cdFx0Zm9yKGxldCBpPTE7IGk8dGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKHRoaXMuX3NlY3Rpb25zW2ldLm9mZnNldExlZnQtdGhpcy5fY29udGFpbmVyV2lkdGg+PXBvc2l0aW9uKSB7XG5cdFx0XHRcdGxldCBpZCA9IHRoaXMuX3NlY3Rpb25zW2ktMV0uaWQ7XG5cdFx0XHRcdGlmKGlkIT09dW5kZWZpbmVkICYmIHRoaXMuZ2V0UGFnZU51bWJlcigpID09PSB0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKSkge1xuXHRcdFx0XHRcdHRpdGxlID0gXCJcIjtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aXRsZSA9IHRoaXMuX3NlY3Rpb25zW2ktMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aXRsZTtcblx0fVxuXHRcblx0c2V0VG9jKCkge1xuXHRcdGlmKCF0aGlzLl90b2MpIHsgcmV0dXJuOyB9XG5cdFx0aWYodGhpcy5fdG9jLmdldEF0dHJpYnV0ZSgnZGF0YS13Yi10b2MnKSkge1xuXHRcdFx0bGV0IHRvY1RpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXHRcdFx0dG9jVGl0bGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2RhdGEtd2ItdG9jLXRpdGxlJyk7XG5cdFx0XHR0b2NUaXRsZS5pbm5lckhUTUwgPSB0b2MuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRvYycpO1xuXHRcdFx0dGhpcy5fdG9jLmFwcGVuZENoaWxkKHRvY1RpdGxlKTtcblx0XHR9XG5cdFx0dGhpcy5fc2VjdGlvbnMuZm9yRWFjaCggdmFsID0+IHtcblx0XHRcdGlmKCF2YWwuY2xhc3NOYW1lLm1hdGNoKC93Yi1uby10b2MvKSkge1xuXHRcdFx0XHRsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0XHRcdFx0cC5pbm5lckhUTUwgPSB2YWwuZ2V0QXR0cmlidXRlKCdkYXRhLXdiLXRpdGxlJyk7XG5cdFx0XHRcdHAuc2V0QXR0cmlidXRlKCdjbGFzcycsJ3diLXRvYy1pdGVtJyk7XG5cdFx0XHRcdGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHRcdFx0XHRhLnNldEF0dHJpYnV0ZSgnaHJlZicsICcjJyArIHZhbC5pZCk7XG5cdFx0XHRcdGEuc2V0QXR0cmlidXRlKCdjbGFzcycsICd3Yi1lbGVtZW50LXBhZ2UtbnVtYmVyIHdiLWxpbmsnKTtcblx0XHRcdFx0cC5hcHBlbmRDaGlsZChhKTtcblx0XHRcdFx0dGhpcy5fdG9jLmFwcGVuZENoaWxkKHApO1xuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblx0XG5cdGdldFRvY0N1cnJlbnRTZWN0aW9uKCkge1xuXHRcdGxldCBwb3NpdGlvbiA9IC10aGlzLl9wb3NpdGlvbjtcblx0XHRmb3IobGV0IGk9MTsgaTx0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYodGhpcy5fc2VjdGlvbnNbaV0ub2Zmc2V0TGVmdC10aGlzLl9jb250YWluZXJXaWR0aD49cG9zaXRpb24pIHtcblx0XHRcdFx0bGV0IGlkID0gdGhpcy5fc2VjdGlvbnNbaS0xXS5pZDtcblx0XHRcdFx0dGhpcy5fdG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKS5mb3JFYWNoKCB2YWwgPT4ge1xuXHRcdFx0XHRcdGlmKHZhbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5yZXBsYWNlKC9eIy8sJycpID09PSBpZCkge1xuXHRcdFx0XHRcdFx0aWYoIXZhbC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5tYXRjaCgvY3VycmVudC8pKSB7XG5cdFx0XHRcdFx0XHRcdHZhbC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSs9JyBjdXJyZW50Jztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYodmFsLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lLm1hdGNoKC9jdXJyZW50LykpIHtcblx0XHRcdFx0XHRcdFx0dmFsLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lPXZhbC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKC8gY3VycmVudC8sJycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGluc2VydEJvb2ttYXJrKCkge1xuXHRcdGxldCBib29rbWFyayA9IG51bGw7XG5cdFx0Zm9yKGxldCBpPTA7IGk8dGhpcy5fZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBlbFBvc2l0aW9uID0gdGhpcy5fZWxlbWVudHNbaV0ub2Zmc2V0TGVmdC10aGlzLmdldE1hcmdpblgoKTtcblx0XHRcdGVsUG9zaXRpb24gPSAoZWxQb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBlbFBvc2l0aW9uLWVsUG9zaXRpb24ldGhpcy5fY29udGFpbmVyV2lkdGggOiBlbFBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0XHRpZihlbFBvc2l0aW9uID09PSAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKGVsUG9zaXRpb24gPiAtdGhpcy5fcG9zaXRpb24pXG5cdFx0XHR7XG5cdFx0XHRcdGJvb2ttYXJrID0gaS0xO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0dGhpcy5fYm9va21hcmsgPSBib29rbWFyaztcblx0fVxuXG5cdGdvVG9Cb29rbWFyayhib29rbWFyaykge1xuXHRcdGxldCBlbGVtZW50ID0gdGhpcy5fZWxlbWVudHNbdGhpcy5fYm9va21hcmtdO1xuXHRcdC8vcG9zaXRpb24gOiBvZmZzZXRMZWZ0IG9mIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGV4dFxuXHRcdGxldCBwb3NpdGlvbiA9IGVsZW1lbnQub2Zmc2V0TGVmdC10aGlzLmdldE1hcmdpblgoKTtcblx0XHRwb3NpdGlvbiA9IChwb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCE9PTAgPyBwb3NpdGlvbi1wb3NpdGlvbiV0aGlzLl9jb250YWluZXJXaWR0aCA6IHBvc2l0aW9uKTsvL2Fsd2F5cyBhdCBhIHBhZ2UgYmVnaW5uaW5nXG5cdFx0Ly90ZXh0IHBvc2l0aW9uID0gLXBvc2l0aW9uXG5cdFx0dGhpcy5fdGV4dC5zdHlsZS5sZWZ0ID0gLXBvc2l0aW9uICsgXCJweFwiO1xuXHRcdHRoaXMuX3Bvc2l0aW9uID0gdGhpcy5fdGV4dC5vZmZzZXRMZWZ0O1xuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9XG5cblx0cmVmcmVzaCgpIHtcblx0XHR0aGlzLmluc2VydEJvb2ttYXJrKCk7XG5cblx0XHRpZih0aGlzLmNvbD09PWZhbHNlKSB7XG5cdFx0XHRcblx0XHRcdHRoaXMuX2N1cnJlbnRQYWdlcy5mb3JFYWNoKCB2YWwgPT4ge1xuXHRcdFx0XHR2YWwuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLl90b3RhbFBhZ2VzLmZvckVhY2goIHZhbCA9PiB7XG5cdFx0XHRcdHZhbC5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fSk7XG5cblx0XHRcdHRoaXMuX2N1cnJlbnRUb3RhbFBhZ2VzLmZvckVhY2goIHZhbCA9PiB7XG5cdFx0XHRcdHZhbC5pbm5lckhUTUwgPSBcIlwiO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdHRoaXMuX2VsUGFnZU51bWJlcnMuZm9yRWFjaCggdmFsID0+IHtcblx0XHRcdFx0dmFsLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5fc2VjdGlvblRpdGxlcy5mb3JFYWNoKCB2YWwgPT4ge1xuXHRcdFx0XHR2YWwuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdFxuXHRcdFx0aWYodGhpcy5fdG9jKSB7XG5cdFx0XHRcdHRoaXMuZ2V0VG9jQ3VycmVudFNlY3Rpb24oKTtcblx0XHRcdH1cdFxuXHRcdFx0XG5cdFx0XHR0aGlzLl9jdXJyZW50UGFnZXMuZm9yRWFjaCggdmFsID0+IHtcblx0XHRcdFx0aWYodmFsLmlubmVySFRNTCE9dGhpcy5nZXRQYWdlTnVtYmVyKCkpIHtcblx0XHRcdFx0XHR2YWwuaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR0aGlzLl90b3RhbFBhZ2VzLmZvckVhY2goIHZhbCA9PiB7XG5cdFx0XHRcdGlmKHZhbC5pbm5lckhUTUwhPXRoaXMuZ2V0VG90YWxQYWdlcygpKSB7XG5cdFx0XHRcdFx0dmFsLmlubmVySFRNTCA9IHRoaXMuZ2V0VG90YWxQYWdlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5fY3VycmVudFRvdGFsUGFnZXMuZm9yRWFjaCggdmFsID0+IHtcblx0XHRcdFx0aWYodmFsLmlubmVySFRNTCE9PSB0aGlzLmdldFBhZ2VOdW1iZXIoKSArIFwiL1wiICsgdGhpcy5nZXRUb3RhbFBhZ2VzKCkpIHtcblx0XHRcdFx0XHR2YWwuaW5uZXJIVE1MID0gdGhpcy5nZXRQYWdlTnVtYmVyKCkgKyBcIi9cIiArIHRoaXMuZ2V0VG90YWxQYWdlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5fZWxQYWdlTnVtYmVycy5mb3JFYWNoKCB2YWwgPT4ge1xuXHRcdFx0XHRsZXQgaWQgPSB2YWwuZ2V0QXR0cmlidXRlKCdocmVmJykucmVwbGFjZSgvXiMvLCcnKTtcblx0XHRcdFx0bGV0IHBhZ2VOdW1iZXIgPSB0aGlzLmVsZW1lbnRQYWdlTnVtYmVyKGlkKTtcblx0XHRcdFx0aWYodmFsLmlubmVySFRNTCE9cGFnZU51bWJlcikge1xuXHRcdFx0XHRcdHZhbC5pbm5lckhUTUwgPSBwYWdlTnVtYmVyO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0dGhpcy5fc2VjdGlvblRpdGxlcy5mb3JFYWNoKCB2YWwgPT4ge1xuXHRcdFx0XHRpZih2YWwuaW5uZXJIVE1MIT09dGhpcy5nZXRTZWN0aW9uVGl0bGUoKSkge1xuXHRcdFx0XHRcdHZhbC5pbm5lckhUTUwgPSB0aGlzLmdldFNlY3Rpb25UaXRsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0fVxufVxuXG4iXX0=
